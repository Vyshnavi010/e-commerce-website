<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Eâ€‘Commerce Demo</title>
  <style>
    :root{--bg:#f5f7fb;--card:#fff;--accent:#0ea5a4;--muted:#64748b}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:#0f172a}
    header{background:linear-gradient(90deg,#06b6d4, #14b8a6);color:white;padding:18px 20px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:10px;background:rgba(255,255,255,0.14);display:flex;align-items:center;justify-content:center;font-weight:700}
    .search{flex:1;max-width:640px;margin:0 16px;display:flex}
    .search input{flex:1;padding:10px 12px;border-radius:10px 0 0 10px;border:none;outline:none}
    .search button{padding:10px 12px;border:none;background:rgba(0,0,0,0.12);border-radius:0 10px 10px 0;cursor:pointer}
    main{padding:20px;display:grid;grid-template-columns:240px 1fr;gap:20px}
    .sidebar{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
    .filters h4{margin:0 0 10px 0}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.06);display:flex;flex-direction:column}
    .card img{width:100%;height:160px;object-fit:cover;border-radius:10px}
    .card .title{font-weight:600;margin:10px 0 6px}
    .card .price{font-weight:700}
    .row{display:flex;gap:8px;align-items:center}

    .cart-btn{background:transparent;border:none;color:white;cursor:pointer;position:relative}
    .cart-count{position:absolute;top:-6px;right:-6px;background:#ef4444;color:white;border-radius:999px;padding:3px 7px;font-size:12px}
    .floating-cart{position:fixed;right:18px;bottom:18px;background:var(--accent);color:white;border-radius:12px;padding:12px 14px;box-shadow:0 8px 30px rgba(2,6,23,0.15);cursor:pointer}

    /* Cart Drawer */
    .drawer{position:fixed;right:0;top:0;height:100vh;width:420px;max-width:92%;transform:translateX(110%);background:var(--card);box-shadow: -20px 0 30px rgba(2,6,23,0.12);transition:transform .26s ease-in-out;padding:18px;overflow:auto}
    .drawer.open{transform:translateX(0)}
    .cart-item{display:flex;gap:10px;align-items:center;padding:10px 0;border-bottom:1px dashed rgba(2,6,23,0.06)}
    .cart-item img{width:64px;height:64px;object-fit:cover;border-radius:8px}
    .qty{display:flex;gap:6px;align-items:center}
    .btn{background:var(--accent);border:none;color:white;padding:10px 12px;border-radius:8px;cursor:pointer}
    .muted{color:var(--muted);font-size:14px}

    footer{padding:20px;text-align:center;color:var(--muted)}

    @media (max-width:880px){main{grid-template-columns:1fr} .search{max-width:none}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">EZ</div>
      <div>
        <div style="font-weight:700">EZ-Shop</div>
        <div style="font-size:12px;opacity:.9">Demo eâ€‘commerce UI</div>
      </div>
    </div>

    <div class="search">
      <input id="search" placeholder="Search products, e.g. wireless mouse" />
      <button id="searchBtn">Search</button>
    </div>

    <div style="display:flex;align-items:center;gap:12px">
      <select id="sort">
        <option value="default">Sort: Popular</option>
        <option value="price-asc">Price: Low â†’ High</option>
        <option value="price-desc">Price: High â†’ Low</option>
      </select>
      <button class="cart-btn" id="openCartBtn" aria-label="Open cart">
        ðŸ›’ <span id="cartCount" class="cart-count">0</span>
      </button>
    </div>
  </header>

  <main>
    <aside class="sidebar">
      <div class="filters">
        <h4>Categories</h4>
        <div><label><input type="checkbox" value="electronics" class="cat"> Electronics</label></div>
        <div><label><input type="checkbox" value="fashion" class="cat"> Fashion</label></div>
        <div><label><input type="checkbox" value="home" class="cat"> Home</label></div>
        <div style="height:12px"></div>
        <h4>Price</h4>
        <div><label><input type="radio" name="price" value="all" checked> All</label></div>
        <div><label><input type="radio" name="price" value="0-499"> â‚¹0 - â‚¹499</label></div>
        <div><label><input type="radio" name="price" value="500-1999"> â‚¹500 - â‚¹1999</label></div>
        <div><label><input type="radio" name="price" value="2000+"> â‚¹2000+</label></div>
      </div>
    </aside>

    <section>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h2 style="margin:0">Products</h2>
        <div class="muted" id="resultCount">Showing 0 items</div>
      </div>

      <div class="products" id="products"></div>
    </section>
  </main>

  <div class="drawer" id="cartDrawer" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3>Your Cart</h3>
      <button id="closeCartBtn" class="muted">Close âœ–</button>
    </div>

    <div id="cartItems"></div>

    <div style="margin-top:14px;display:flex;justify-content:space-between;align-items:center">
      <div>
        <div class="muted">Subtotal</div>
        <div style="font-weight:700" id="subtotal">â‚¹0</div>
      </div>
      <div>
        <button class="btn" id="checkoutBtn">Checkout</button>
      </div>
    </div>
  </div>

  <button class="floating-cart" id="openCartBtn2">Open Cart</button>

  <footer>
    Built with vanilla HTML/CSS/JS â€” demo only. No backend; cart uses localStorage.
  </footer>

  <script>
    // Sample product catalog - in real app, fetch from API
    const PRODUCTS = [
      {id:1,title:'Wireless Headphones',price:1399,category:'electronics',img:'https://tse3.mm.bing.net/th/id/OIP.E2KzLGz3OADm2F2ssWuOOwHaE8?pid=Api&P=0&h=180'},
      {id:2,title:'Men\'s Casual Shirt',price:799,category:'fashion',img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRuc_IaDs9PzL8rL5keiimWtFa2EpVlMEeE1g&s'},
      {id:3,title:'Ceramic Coffee Mug',price:299,category:'home',img:'https://images.pexels.com/photos/1207918/pexels-photo-1207918.jpeg?cs=srgb&dl=pexels-fotios-photos-1207918.jpg&fm=jpg'},
      {id:4,title:'Bluetooth Speaker',price:2499,category:'electronics',img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSDderxLGtGTJgoudSeZAAeu7XOquEQbH5aXA&s'},
      {id:5,title:'Women\'s Sneakers',price:2199,category:'fashion',img:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=5'},
      {id:6,title:'LED Desk Lamp',price:1199,category:'home',img:'https://png.pngtree.com/thumb_back/fh260/background/20230706/pngtree-d-render-of-sensor-desk-lamp-with-yellow-led-illumination-on-image_3808346.jpg'}
    ];

    // Utilities
    const qs = sel => document.querySelector(sel);
    const qsa = sel => Array.from(document.querySelectorAll(sel));

    // Cart state stored in localStorage
    let cart = JSON.parse(localStorage.getItem('ez_cart')||'{}');

    function saveCart(){ localStorage.setItem('ez_cart', JSON.stringify(cart)); renderCart(); updateCartCount(); }
    function updateCartCount(){ const count = Object.values(cart).reduce((s,i)=>s+i.qty,0); qs('#cartCount').textContent = count; qs('#openCartBtn2').textContent = `Open Cart (${count})`; }

    function formatPrice(v){ return 'â‚¹'+v.toLocaleString('en-IN'); }

    // Render functions
    function renderProducts(list){ const wrap=qs('#products'); wrap.innerHTML=''; list.forEach(p=>{
      const div=document.createElement('div'); div.className='card';
      div.innerHTML = `
        <img src="${p.img}" alt="${p.title}" />
        <div class="title">${p.title}</div>
        <div class="muted">${p.category}</div>
        <div style="margin-top:auto;display:flex;justify-content:space-between;align-items:center">
          <div class="price">${formatPrice(p.price)}</div>
          <div class="row">
            <button class="btn add" data-id="${p.id}">Add</button>
          </div>
        </div>
      `;
      wrap.appendChild(div);
    }); qs('#resultCount').textContent = `Showing ${list.length} items`; 
    // attach add buttons
    qsa('.add').forEach(b=>b.addEventListener('click',()=>addToCart(Number(b.dataset.id)))); }

    function renderCart(){ const wrap = qs('#cartItems'); wrap.innerHTML=''; let subtotal=0;
      const ids = Object.keys(cart);
      if(ids.length===0){ wrap.innerHTML = '<div class="muted">Cart is empty.</div>'; qs('#subtotal').textContent = formatPrice(0); return; }
      ids.forEach(id=>{
        const it = cart[id]; const p = PRODUCTS.find(x=>x.id===Number(id));
        const row = document.createElement('div'); row.className='cart-item';
        row.innerHTML = `
          <img src="${p.img}" alt="${p.title}" />
          <div style="flex:1">
            <div style="font-weight:600">${p.title}</div>
            <div class="muted">${formatPrice(p.price)}</div>
            <div class="qty" style="margin-top:8px">
              <button class="mutate" data-op="dec" data-id="${id}">-</button>
              <div style="min-width:28px;text-align:center">${it.qty}</div>
              <button class="mutate" data-op="inc" data-id="${id}">+</button>
            </div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:700">${formatPrice(p.price * it.qty)}</div>
            <div style="margin-top:8px"><button class="muted" data-op="rm" data-id="${id}">Remove</button></div>
          </div>
        `;
        wrap.appendChild(row);
        subtotal += p.price * it.qty;
      });
      qs('#subtotal').textContent = formatPrice(subtotal);
      // attach cart buttons
      qsa('.mutate').forEach(btn=> btn.addEventListener('click',e=>{
        const id = btn.dataset.id; const op = btn.dataset.op;
        if(op==='inc'){ cart[id].qty += 1; }
        else if(op==='dec'){ cart[id].qty = Math.max(0, cart[id].qty-1); if(cart[id].qty===0) delete cart[id]; }
        else if(op==='rm'){ delete cart[id]; }
        saveCart();
      }));
    }

    function addToCart(id){ if(!cart[id]) cart[id] = {qty:0}; cart[id].qty += 1; saveCart(); openCart(); }

    // Filters and search
    function getFilters(){
      const cats = qsa('.cat:checked').map(i=>i.value);
      const price = (qsa('input[name="price"]:checked')[0]||{}).value || 'all';
      const q = qs('#search').value.trim().toLowerCase();
      const sort = qs('#sort').value;
      return {cats,price,q,sort};
    }

    function applyFilters(){ let list = PRODUCTS.slice(); const f = getFilters();
      if(f.cats.length) list = list.filter(p=> f.cats.includes(p.category));
      if(f.price !== 'all'){
        if(f.price==='0-499') list = list.filter(p=> p.price <=499);
        if(f.price==='500-1999') list = list.filter(p=> p.price >=500 && p.price <=1999);
        if(f.price==='2000+') list = list.filter(p=> p.price >=2000);
      }
      if(f.q) list = list.filter(p=> p.title.toLowerCase().includes(f.q) || p.category.toLowerCase().includes(f.q));
      if(f.sort==='price-asc') list.sort((a,b)=>a.price-b.price);
      if(f.sort==='price-desc') list.sort((a,b)=>b.price-a.price);
      renderProducts(list);
    }

    // Drawer controls
    const cartDrawer = qs('#cartDrawer');
    function openCart(){ cartDrawer.classList.add('open'); cartDrawer.setAttribute('aria-hidden','false'); }
    function closeCart(){ cartDrawer.classList.remove('open'); cartDrawer.setAttribute('aria-hidden','true'); }

    // Event wiring
    qs('#openCartBtn').addEventListener('click',openCart);
    qs('#openCartBtn2').addEventListener('click',openCart);
    qs('#closeCartBtn').addEventListener('click',closeCart);
    qs('#checkoutBtn').addEventListener('click',()=>{
      if(Object.keys(cart).length===0){ alert('Your cart is empty'); return; }
      alert('Checkout is a demo. In a real app you\'d collect address, payment and call the server.');
      cart = {}; saveCart(); closeCart();
    });

    // filters
    qsa('.cat').forEach(i=>i.addEventListener('change',applyFilters));
    qsa('input[name="price"]').forEach(i=>i.addEventListener('change',applyFilters));
    qs('#sort').addEventListener('change',applyFilters);
    qs('#searchBtn').addEventListener('click',applyFilters);
    qs('#search').addEventListener('keydown',e=>{ if(e.key==='Enter') applyFilters(); });

    // initialize
    renderCart(); updateCartCount(); applyFilters();

    // small UX: close drawer on outside click
    window.addEventListener('click',e=>{
      if(!cartDrawer.classList.contains('open')) return;
      if(!cartDrawer.contains(e.target) && !e.target.matches('#openCartBtn') && !e.target.closest('.floating-cart')) closeCart();
    });

  </script>
</body>
</html>
